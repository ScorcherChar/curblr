# About location

Curb regulations always apply to a linear segment (or "zone) of the curb, but in the physical world they are often marked as points, such as parking signs or meters. For this reason, agencies often collect and store point-based data about the curb. Sometimes an agency's dataset contains sufficient information to determine the beginning and end of the zone. Sometimes it does not.

CurbSpec allows location information to be stored either as street segments or as street-linked points, in order to enable all cities to store and share their data in a standardized format.

# Using linear referencing

Since curb regulations apply to a segment of the street, sign posts and zones most reference a particular street and their location along it.

Doing this requires a standard referencing system that works across jurisdictions. The [SharedStreets Referencing System](https://sharedstreets.io/how-the-sharedstreets-referencing-system-works/) provides an open, non-proprietary method for identifying street segments and integrating multiple underlying basemaps into a single shared referencing system. CurbSpec includes SharedStreets References to provide a truly common way to talk about both a place on the curb and the rules that apply in that place.

The [SharedStreets command line interface](https://github.com/sharedstreets/sharedstreets-js) enables users to generate linear references for input data before converting it into the CurbSpec JSON format.

# Definition using street segments

Each object in the JSON should contain the following properties:

| Field name | Importance  | Type | Description | Example |
| :---: | :--- | :--- | :--- | :--- |
| shst_ref_id | Required | `string` | An alphanumeric hash generated by the [SharedStreets Referencing System](https://sharedstreets.io/how-the-sharedstreets-referencing-system-works/), which refers to the street segment and its direction. This provides a common, non-proprietary way to identify a street and can be used to link city and private datasets | `592c2106e6553d3c930a372763f10254` |
| shst_location_st | Required | `float` | Where the restriction zone starts. Given as the distance (in meters) along the street, in the direction of digitization | `80.362` |
| shst_location_end | Required | `float` | Where the restriction zone ends. Given as the distance (in meters) along the street, in the direction of digitization | `95.295` |
| direction | Required | `enum` (`string`) Values: `forward`, `back` | Where the restriction zone ends. Given as the distance (in meters) along the street, in the direction of digitization | `forward` |
| side_of_street | Required | `enum` (`string`) Values: `left`, `right` | Side of street that the curb regulation applies to, relative to the direction of digitization | `left` |

# Definition using point data

Each object in the JSON should contain the following properties:

| Field name | Importance  | Type | Description | Example
| :---: | :--- | :--- | :--- | :--- |
| x | Recommended | `float` | The longitude of the point, in decimal degrees | `-118.281607` |
| y | Recommended | `float` | The latitude of the point, in decimal degrees | `34.022751` |
| z | If applicable | `int` | For multi-level roads, this indicates the vertical level, where `0` is ground level, `-1` is 1 level below ground, `1` is one level above ground, and so on | `1` |
| shst_ref_id | Required | `string` | An alphanumeric hash generated by the [SharedStreets Referencing System](https://sharedstreets.io/how-the-sharedstreets-referencing-system-works/), which refers to the street segment and its direction. This provides a common, non-proprietary way to identify a street and can be used to link city and private datasets | `592c2106e6553d3c930a372763f10254` |
| shst_location | Required | `float` | Location of a point-based regulation. Given as the distance (in meters) along the street, in the direction of digitization | `86.925` |
| pt_relation | Recommended | `enum` (`int`) Values: `0`-`3` | Defines the relationship between signs of the same type in order to enable the extrapolation of zone information. For example, can be used to denote the beginning and end of a "No parking" zone. `0` = Point-based data, relationship to other signs is not known. `1` = Beginning of a zone. `2` = Continuation of a zone. `3` = End of a zone | `1` |
| direction | Required | `enum` (`string`) Values: `forward`, `back` | Where the restriction zone ends. Given as the distance (in meters) along the street, in the direction of digitization | `95.295` |
| side_of_street | Required | `enum` (`string`) Values: `left`, `right` | Side of street that the curb regulation applies to, relative to the direction of digitization | `left` |

## Using point-based data

Location information is most precise when expressed as street segments, or as point-based data with information about sign relations.

If a city only has point-based data, then the zone must be extrapolated/estimated. It is preferable if a city performs this internally before publishing their data in CurbSpec format. For example, if the city knows the approximate width of a metered parking space, then it can estimate the zone length.

The [SharedStreets map conflation tools](https://github.com/sharedstreets/sharedstreets-js) can convert point-based data into linear-referenced street segments. When processing input data, users have the option to buffer points by a certain specified distance and to convert them into street segments of the specified length. The desired length can be specific to each point, specified by a column in the input data.
